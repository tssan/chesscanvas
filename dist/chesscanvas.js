!function s(r,o,a){function h(i,e){if(!o[i]){if(!r[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(n)return n(i,!0);throw(e=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",e}t=o[i]={exports:{}},r[i][0].call(t.exports,function(e){return h(r[i][1][e]||e)},t,t.exports,s,r,o,a)}return o[i].exports}for(var n="function"==typeof require&&require,e=0;e<a.length;e++)h(a[e]);return h}({1:[function(e,i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r={theme:{backgroundColor:"#e7e7e7",boardColor:"#a7a7a7",blackPiecesColor:"#131313",whitePiecesColor:"#5b7731"},flip:!1},a={P:"♙",K:"♔",Q:"♕",R:"♖",B:"♗",N:"♘",p:"♟",k:"♚",q:"♛",r:"♜",b:"♝",n:"♞"};class s{constructor(e,i,t,s){this.el=e,this.fen=i,this.size=t,this.options=Object.assign(Object.assign({},r),s),this.el.style.width=t+"px",this.el.style.height=t+"px",this.el.style.backgroundColor=this.options.theme.backgroundColor,this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=t,this.boardPadding=.05*t,this.squareSize=(t-2*this.boardPadding)/8,this.filesSpaceSize=6,this.boardFontSize=Math.max(this.boardPadding-this.filesSpaceSize/2,6),this.piecesFontSize=.75*this.squareSize,this.el.appendChild(this.canvas),this.render()}render(){var t=this.canvas.getContext("2d");t.fillStyle=this.options.theme.backgroundColor,t.fillStyle=this.options.theme.backgroundColor,t.fillRect(0,0,this.size,this.size),t.strokeStyle=this.options.theme.boardColor,t.fillStyle=this.options.theme.boardColor;for(let i=0;i<8;i++)for(let e=0;e<8;e++)(i%2==0&&e%2!=0||i%2!=0&&e%2==0)&&this.drawSquare(t,i,e);t.strokeRect(this.boardPadding,this.boardPadding,this.size-2*this.boardPadding,this.size-2*this.boardPadding),this.drawRanksAndFiles(t),this.drawPieces(t)}drawRanksAndFiles(i){var t=["a","b","c","d","e","f","g","h"],s=["1","2","3","4","5","6","7","8"].reverse();this.options.flip&&(t.reverse(),s.reverse()),i.font=this.boardFontSize+"px serif";for(let e=0;e<t.length;e++){var r=i.measureText(t[e]).width,r=e*this.squareSize+this.squareSize-this.boardPadding/2+r/2,o=this.boardFontSize-this.filesSpaceSize/2;i.fillText(t[e],r,o)}for(let e=0;e<s.length;e++){var a=i.measureText(s[e]).width,a=this.boardPadding/2-a/2,h=e*this.squareSize+2*this.boardPadding+this.boardFontSize/2;i.fillText(s[e],a,h)}}getPieceColor(e){return e==e.toUpperCase()?this.options.theme.whitePiecesColor:this.options.theme.blackPiecesColor}drawSquare(e,i,t){e.fillRect(i*this.squareSize+this.boardPadding,t*this.squareSize+this.boardPadding,this.squareSize,this.squareSize)}drawPieces(t){var s=this.fenToPieces();t.font=this.piecesFontSize+"px serif";for(let i=0;i<s.length;i++)for(let e=0;e<s[i].length;e++){var r,o=a[s[e][i]];o&&(r=t.measureText(o).width,t.fillStyle=this.getPieceColor(s[e][i]),t.fillText(o,i*this.squareSize+this.squareSize-this.boardPadding/2-r/4,e*this.squareSize+this.squareSize+this.piecesFontSize/4))}t.fillStyle=this.options.theme.boardColor}parseFenRow(e){var i;let t=[];for(i of e.split(""))isNaN(Number(i))?t.push(i):t=[...t,...Array(Number(i)).fill("")];return this.options.flip&&t.reverse(),t}fenToPieces(){var e=[],i=this.fen.split(" ")[0].split("/");this.options.flip&&i.reverse();for(const t of i)e.push(this.parseFenRow(t));return e}}t.default=s,window.Canvas=s},{}]},{},[1]);